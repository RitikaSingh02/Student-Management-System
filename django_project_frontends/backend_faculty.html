<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<body align="center">
<link rel='icon' type='png' href='C:\Users\ritik\Desktop\icon.png'>
<script src="student_deletion.js"></script>
<script src="update_student.js"></script>
<!-- <script src="style.css"></script> -->
<table id = "table" class = "table table-hover"></table> 

    <script>
    var tblSomething="";
    function deletion(value){
        
        submitfun(document.getElementById("del-"+value).innerHTML);
    }
    
    function updation(value){
        
        var b=document.getElementById("del-"+value).innerHTML;
        // var c=document.getElementById("ps-"+value).innerHTML;
        var d=document.getElementById("fn-"+value).innerHTML;
        var e=document.getElementById("em-"+value).innerHTML;
        var f=document.getElementById("br-"+value).innerHTML;
        var g=document.getElementById("ph-"+value).innerHTML;
        url='http://localhost/files/update_student.html?'+encodeURIComponent(b)+
        '?'+encodeURIComponent(d)+'?'+encodeURIComponent(e)+
        '?'+encodeURIComponent(f)+
        '?'+encodeURIComponent(g);
        window.open(url,
        '_blank');//do write it in two lines else it wont work
        
    }
    window.onload=function(){

    var x=0;
    var tblSomething= '<thead > <tr class="success"> <td><b> USER_NAME</b> </td><td><b>FATHER NAME</b></td><td><b>EMAIL</b></td><td><b>BRANCH</b></td><td><b>CONTACT NUMBER</b></td></tr> </thead>'; 
    var request=new XMLHttpRequest();
    var url= 'http://127.0.0.1:8000/users/students/';
    request.open("GET",url,true);
    request.setRequestHeader("Content-Type", "application/json");
    
    request.onreadystatechange = function () {
            
            if (this.readyState == 4 && this.status == 200){
                data=JSON.parse(this.response);
                console.log(data);
                for(x in data){
                    tblSomething += '<tr>';
                    tblSomething += '<td id="del-'+x+'" class="success">' +data[x].USER_NAME+'</td><td id="fn-'+x+'">'
                    +data[x].father_name+'</td ><td id="em-'+x+'">'
                    +data[x].email+'</td><td id="br-'+x+'">'
                    +data[x].branch+'</td><td id="ph-'+x+'">'
                    +data[x].phone_no+
                    '</td><td><button  class="btn btn-success" onclick="updation('+x+')">UPDATE</button></td>'+
                    '<td><button " class="btn btn-danger" onclick="deletion('+x+')">DELETE</button></td></tr>';
                    
                }
                
                document.getElementById("table").innerHTML=tblSomething;
        }
    
    };
    request.send();
    }
    

    </script>


<br><br><br>
<a href="http://localhost/files/insert_student.html" target="_blank"><button align="center">INSERT A STUDENT</button></a><br><br>
<a href="http://localhost/files/ans_query.html" target="_blank"><button align="center">CLICK TO ANS QUERY</button></a><br><br>
<a href="http://localhost/files/portallogin.html"><butto align="center">LOGOUT</butto></a>
<br><br> 
  
</body>

